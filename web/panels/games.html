<html>
<head>

<style type="text/css">
body {background-image:url(../images/transparentYellowPanel.png);
background-color:transparent;
background-size:100% 100%;
background-repeat:no-repeat;
background-position:50%50%;
overflow-y:hidden;
overflow-x:hidden;
}

div#parentWindow{
    width:100%;
    height:100%;
}
div#container
{
display:block;
text-align:center;
margin:0 auto;
top:0px;
//left:0px;

width:500px;
height:300px;

overflow-x:hidden;
background-color:transparent;
border:2px solid black;
}

#redPictureBox
{   
    position:relative;
    display:none;
    background-color:blue;
    background-image:url('../images/RedCircle.png');
    background-position:center;
    //left:0px;
    //top:600px;
    width:250px;
    height:250px;
    
    -webkit-animation-name: scrollRight;
    -webkit-animation-duration: 1s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-play-state: paused;
    /*standard syntax*/
    animation-name: scrollRight;
    animation-duration: 3s;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    animation-fill-mode: forwards;
    animation-play-state: paused;

}

#greenPictureBox 
{   
    position:relative;
    display:none;
    background-color:blue;
    background-image:url('../images/GreenSquare.png');
    background-position:center;
    //left:0px;
    //top:600px;
    width:250px;
    height:250px;
    
    -webkit-animation-name: scrollRight;
    -webkit-animation-duration: 1s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-play-state: paused;
    /*standard syntax*/
    animation-name: scrollRight;
    animation-duration: 3s;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    animation-fill-mode: forwards;
    animation-play-state: paused;

}

#yellowPictureBox 
{   
    position:relative;
    display:none;
    background-color:blue;
    background-image:url('../images/YellowTriangle.png');
    background-position:center;
    //left:0px;
    //top:600px;
    width:250px;
    height:250px;
    
    -webkit-animation-name: scrollRight;
    -webkit-animation-duration: 1s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-play-state: paused;
    /*standard syntax*/
    animation-name: scrollRight;
    animation-duration: 3s;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    animation-fill-mode: forwards;
    animation-play-state: paused;

}
/* Chrome, Saffari, Operal */
@-webkit-keyframes scrollRight
{
/*what it does during the animations*/
    0% {left:-250px;top:0px;opacity:0.01; }
    50% {left:-62.5px;top:0px;opacity:.5;}
    100% {left:125px;top:0px;opacity:1;}
}
/*standard or IE */
@keyframes scrollRight
{
/*what it does during the animations*/
    0% {left:0px;top:0px;opacity:0.01; }
    50% {left:125px;top:0px;opacity:.5;}
    100% {left:250px;top:0px;opacity:1;}
}

@-webkit-keyframes scrollRightFurther
{
/*what it does during the animations*/
    0% {  left:00px; top: 0px; opacity:1; }
    100%   {  left:500px; top: 0px; opacity:0.01;  }
}
/*standard or IE */
@keyframes scrollRightFurther
{/*what it does during the animations*/
    0% {  left:00px; top: 0px; opacity:0.1; }
    100%   {  left:500px; top: 0px; opacity:0.01;  }
}

button {
    //position:absolute;
    top:100px;}

#text {
    background-color:white;
    position:relative;
    display:block;
    top:300px;
    height:100px;
    width:100px;
}
</style>
<script type="text/javascript" src="../js/games.js"></script>




<script type="text/javascript">
var counter;
window.onload=function () {
    counter = 1;
    //END OF ONLOAD*/
}
    // Use to retrieve the currently existing keyframe rules CHECK!!!!
    function findKeyframesRule(rule){
        var ss = document.styleSheets;
        for(var i = 0; i < ss.length; i++){
            for(var j = 0; j < ss[i].cssRules.length; j++){
                if(ss[i].cssRules[j].type == window.CSSRule.WEBKIT_KEYFRAMES_RULE && ss[i].cssRules[j].name == rule){
                    return ss[i].cssRules[j];
                }
            }
        }
        return null;
    }

    //create keyframes object
    keyframes = findKeyframesRule("scrollRight");
    console.log(keyframes);
    
    //length of keyframes.cssRules
    var kLength = keyframes.cssRules.length;
    console.log(kLength);
    
    //keyframes in 0%, 50%, 100% needed for deleteRules
    keyframeString = [];
    for(var i = 0;i < kLength; i++){
        keyframeString.push(keyframes[i].keyText);
    }
    console.log(keyframeString);
    
    // Array of strings containing Ids of the picturebox divs
    var picDivs = new Array("greenPictureBox", "yellowPictureBox", "redPictureBox");
    // Picks a div randomly to show. A new random will spawn everytime pickDivision() is called.
    function pickDivision(){
        var num = Math.floor(Math.random() * 3);
        //return num;
        //theObject.identification = picDivs[num];
        var randomDiv = picDivs[num];
        return randomDiv;
    }
    
    // MEAT N POTATOS
    var rDiv = pickDivision();
    console.log(rDiv);
    
    //Used in the next function to compare strings
    var one = "";
    var two = "";
    
    function compareAndConquer(){

        yesNo = false;
        console.log("Start " + counter);
        if(counter==1){
            one = rDiv.toString();
            //console.log("value of one " + one);
            counter++;
            //console.log("after one counter = " + counter);
            //console.log(typeof one);
        }else if(counter==2){
            two = rDiv.toString();
            //console.log("value of two " + two);
            counter=1;
            //console.log(typeof one);
            //console.log("after two counter = " + counter);
        }
        //var num = doesAequalB(one, two);
        //console.log("num equals " + num);
        console.log("one = " + one + ", Two = " + two);
        
        if(one.localeCompare(two)===0){
            yesNo = true;
        }
        console.log(yesNo);
        return yesNo;
    }

    
    
    function restartAnimation(divId){
        // Deletes current keyframe rules
        rDiv = pickDivision();
        //console.log(rDiv);
        for(var i = 0;i < kLength; i++){
            keyframes.deleteRule(keyframeString[i]);
        }
        // Insert new keyframe rules
        keyframes.insertRule("0% { left: -250px; opacity:0.01;}");
        keyframes.insertRule("50% { left: -62.5px; opacity:.5;}");
        keyframes.insertRule("100% { left: 125px; opacity:1;}");
        var e = document.getElementById(divId);
        
        e.style.WebkitAnimationName = "scrollRight";
        e.style.display = "none";
        //console.log(keyframes);
    }
    
    // (Re)Starts the Animation
    function restart(){
    pickDivision(rDiv);
    restartAnimation(rDiv);//I need this function to set the id with math.random and keep the variable live:
    //document.getElementById(rDiv.identification).style.display= "block";
    //NEEDS TO BE SET TIMEOUT IN THIS FORMAT TO ALLOW PARAMETERS ON PLAY!!!!!!!!!!!
    setTimeout(function(){play(rDiv);}, 0);//set rDiv in play? this way the variable stays the same.
    //we also need it to stay the same for the second animation
    
    }
    
    function changeAnimation(divId){
        for(var i = 0;i < kLength; i++){
            keyframes.deleteRule(keyframeString[i]);
        }
        
        // Insert new keyframe rules
        keyframes.insertRule("0% { left: 125px; opacity:1;}");
        keyframes.insertRule("50% { left: 312.5px; opacity:.5;}");
        keyframes.insertRule("100% { left: 500px; opacity:.01;}");
        //console.log(keyframes);
        var e = document.getElementById(divId);
        
        e.style.webkitAnimationName = "scrollRight";
        e.style.display = "none";
    }
    //BUTTON2
    function secondAnimation(){
        var e = document.getElementById(rDiv);
        e.style.webkitAnimationName = "none";
        //e.style.display = "none";
        //console.log(rDiv.identification);
        changeAnimation(rDiv);
        //var curr = window.getComputedStyle(rDiv);
        console.log(rDiv);
        //e.style.display= "block";
        //NEEDS TO BE SET TIMEOUT IN THIS FORMAT TO ALLOW PARAMETERS ON PLAY!!!!!!!!!!!
        setTimeout(function(){play(rDiv);}, 1);
    }
    
    
//!!!!!!!!!!!!!!!!!TESTPLAY FUNCTIONS!!!TESTPLAY FUNCTIONS!!!!!!!!!!!!!!!!!!!!!!
    function play(id){
        //var rDiv = pickDivision();
        document.getElementById(id).style.display= "block";//NESSESARY BUT WHYYYY
        playAnimation(id);
    }
    
    function pause(){
        pauseAnimation(rDiv);
    }
    
    //Add Listener functions from tutorials solution
    function start(){
        document.removeEventListener('webkitAnimationStart', start, false);
        //setTimeout("startChange()", 600);
    }
    
    function addListener(){
        document.addEventListener('webkitAnimationEnd', restartAnimation, false);
    }
    
</script>
<title>Games</title>

</head>
<body>

<!--
 <h1>Games</h1>
 <p>Skateboarding is mentally strenuous too! These games will get your brain in tip-top condition!</p>ta
 <label>animation play state = playing</label><button onClick="play()">PlayAnimation</button>
 <label>animation play state = paused</label><button onclick="pause()">PauseAnimation</button>
 <p>Accomplished by deleting name, deleting rules, add rules add name. Like this:</p>
 <p>style.animation = none, delete rules, add rules, style.animation=(new)scrollRight</p>
 -->
 <button onclick="console.log(navigator)">Log Browser Info</button>
 <p>deleting name, delete rules, addrules, style.animation = scrollRight, AnimationPlaystate=running</p><button onclick="restart(),compareAndConquer()">Restart Animation</button>
 <button onclick="secondAnimation()">Second Animation</button>
 
 <label>alert</label><button onclick="console.log(pickDivision())">gay</button>
<div id="parentWindow">
 <div id="container">
  <div id="redPictureBox" >
  </div>
  <div id="yellowPictureBox" >
  </div>
  <div id="greenPictureBox" >
  </div>
 </div>

 <p id="text"></p>
</div>

</body>
</html>